### 事件循环机制

https://zhuanlan.zhihu.com/p/87684858

#### 1. 进程与线程的区别

进程：CPU在运行指令及加载和保存上下文所需要的时间（时间片）

线程：是进程中更小的单位，描述了执行一段指令所需要的时间

#### 2. JS单线程的好处

- 获取dom时渲染更安全
- 消耗更少的运行内存，节约资源

#### 3. 执行栈

存储函数调用的栈结构

#### 4. event-loop

- 异步中的微任务和宏任务

  微任务：process.nextTick，promise的then，MutationObserver

  宏任务：script(同步代码)，setTimeout，setInterval，setImmediate，I/O，UI-rendering

- js执行引擎的执行代码的顺序：
  1. 首先**执行同步代码**（宏任务）
  2. 当执行完所有的同步代码，执行栈为空，查看**是否有异步代码**需要执行，有则执行
  3. **执行所有微任务**
  4. 当所有微任务执行完后，有必要的话就**渲染页面**
  5. 然后开始下一轮的**Event-Loop**，**执行（异步函数中的）宏任务（中的异步代码）**

应用

把操作dom的宏任务代码放到微任务中可以更快渲染

### nodejs 的eventLoop分为下面的几个阶段:

1. timer 阶段
2. I/O异常回调阶段
3. 空闲、预备状态(第2阶段结束，poll未触发之前)
4. poll 阶段
5. check 阶段
6. 关闭事件的回调阶段





